<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<title>Impostor Game</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<style>
		* {
			box-sizing: border-box;
			font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
		}

		body {
			margin: 0;
			min-height: 100vh;
			display: flex;
			align-items: center;
			justify-content: center;
			background: #0f172a;
			color: #e5e7eb;
		}

		.container {
			background: #111827;
			border-radius: 12px;
			padding: 20px;
			width: 100%;
			max-width: 480px;
			box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
		}

		h1 {
			margin-top: 0;
			font-size: 1.5rem;
			text-align: center;
		}

		label {
			display: block;
			font-size: 0.9rem;
			margin-bottom: 4px;
			color: #9ca3af;
		}

		input[type="number"],
		textarea {
			width: 100%;
			border-radius: 8px;
			border: 1px solid #374151;
			background: #020617;
			color: #e5e7eb;
			padding: 8px 10px;
			font-size: 0.95rem;
		}

		textarea {
			min-height: 120px;
			resize: vertical;
		}

		button {
			display: inline-block;
			border: none;
			border-radius: 999px;
			padding: 10px 16px;
			font-size: 0.95rem;
			font-weight: 600;
			cursor: pointer;
			background: #22c55e;
			color: #022c22;
			transition: transform 0.05s ease, box-shadow 0.1s ease, background 0.15s ease;
			box-shadow: 0 8px 20px rgba(34, 197, 94, 0.4);
		}

		button:hover {
			background: #16a34a;
			transform: translateY(-1px);
		}

		button:active {
			transform: translateY(0);
			box-shadow: 0 3px 10px rgba(34, 197, 94, 0.3);
		}

		.button-secondary {
			background: #4b5563;
			color: #e5e7eb;
			box-shadow: none;
		}

		.button-secondary:hover {
			background: #6b7280;
		}

		.section {
			margin-bottom: 16px;
		}

		.row {
			display: flex;
			gap: 10px;
			align-items: center;
			margin-top: 10px;
		}

		.error {
			color: #f97373;
			font-size: 0.85rem;
			margin-top: 4px;
			min-height: 1.1em;
		}

		.badge {
			display: inline-block;
			padding: 3px 10px;
			border-radius: 999px;
			background: #1f2937;
			font-size: 0.8rem;
			color: #9ca3af;
			margin-bottom: 8px;
		}

		.role-card {
			border-radius: 12px;
			padding: 16px;
			background: #020617;
			border: 1px solid #1f2937;
			text-align: center;
		}

		.role-main {
			font-size: 1.3rem;
			font-weight: 700;
			margin-bottom: 6px;
		}

		.role-sub {
			font-size: 0.95rem;
			color: #9ca3af;
		}

		.highlight-impostor {
			color: #f97373;
		}

		.highlight-category {
			color: #38bdf8;
		}
	</style>
</head>
<body>
	<div class="container">
		<h1>Impostor Game</h1>

		<!-- SETUP SCREEN -->
		<div id="setup-screen">
			<div class="section">
				<label for="player-count">Number of players</label>
				<input
					id="player-count"
					type="number"
					min="2"
					max="99"
					value="5"
				/>
			</div>

			<div class="section">
				<label for="categories">
					Categories (one per line or separated by commas)
				</label>
				<textarea
					id="categories"
					placeholder="Example:
Doctor
Detective
Engineer
Alien"
				></textarea>
			</div>

			<div class="section">
				<label for="impostor-count">
					Number of impostors (optional, default = 1)
				</label>
				<input
					id="impostor-count"
					type="number"
					min="1"
					max="10"
					placeholder="1"
				/>
			</div>

			<div class="error" id="error-message"></div>

			<div class="row">
				<button id="start-button">Start game</button>
				<button class="button-secondary" id="fill-example">
					Fill example categories
				</button>
			</div>
		</div>

		<!-- GAME SCREEN -->
		<div id="game-screen" style="display: none;">
			<div class="badge" id="player-badge">Player ?</div>

			<div class="role-card" id="role-card">
				<div class="role-main" id="role-main-text">
					Pass the device to the next player.
				</div>
				<div class="role-sub" id="role-sub-text">
					When you are ready, press the button below to see your role.
				</div>
			</div>

			<div class="section" style="margin-top: 16px; text-align: center;">
				<button id="role-button">Show my role</button>
			</div>
		</div>

		<!-- FINISHED SCREEN -->
		<div id="finished-screen" style="display: none; text-align: center;">
			<div class="role-card">
				<div class="role-main">All roles have been shown!</div>
				<div class="role-sub">
					You can now discuss and start the game, or start a new round.
				</div>
			</div>

			<div class="section" style="margin-top: 16px;">
				<button id="new-game">Start new game</button>
			</div>
		</div>
	</div>

	<script>
		const setupScreen = document.getElementById("setup-screen");
		const gameScreen = document.getElementById("game-screen");
		const finishedScreen = document.getElementById("finished-screen");

		const playerCountInput = document.getElementById("player-count");
		const categoriesInput = document.getElementById("categories");
		const impostorCountInput = document.getElementById("impostor-count");
		const errorMessage = document.getElementById("error-message");

		const startButton = document.getElementById("start-button");
		const exampleButton = document.getElementById("fill-example");
		const roleButton = document.getElementById("role-button");
		const playerBadge = document.getElementById("player-badge");
		const roleMainText = document.getElementById("role-main-text");
		const roleSubText = document.getElementById("role-sub-text");
		const newGameButton = document.getElementById("new-game");

		let totalPlayers = 0;
		let currentPlayer = 1;
		let impostorIndexes = [];
		let categories = [];
		let hasShownRole = false;

		// NEW: one common category/place per round for all non-impostors
		let commonCategory = "";

		function parseCategories(raw) {
			return raw
				.split(/[\n,]/)
				.map((c) => c.trim())
				.filter((c) => c.length > 0);
		}

		function chooseImpostors(playerCount, impostorCount) {
			const pool = Array.from({ length: playerCount }, (_, i) => i + 1);
			const chosen = [];

			impostorCount = Math.min(impostorCount, playerCount);

			for (let i = 0; i < impostorCount; i++) {
				const idx = Math.floor(Math.random() * pool.length);
				chosen.push(pool[idx]);
				pool.splice(idx, 1);
			}

			return chosen;
		}

		function resetRoleCardForNextPlayer() {
			playerBadge.textContent = `Player ${currentPlayer}`;
			roleMainText.textContent = "Pass the device to this player.";
			roleSubText.textContent =
				"When they are ready, press the button to see the role.";
			roleMainText.classList.remove("highlight-impostor", "highlight-category");
			roleSubText.classList.remove("highlight-category");
			roleButton.textContent = "Show my role";
			hasShownRole = false;
		}

		function showPlayerRole() {
			const isImpostor = impostorIndexes.includes(currentPlayer);

			if (isImpostor) {
				roleMainText.textContent = "YOU ARE THE IMPOSTOR";
				roleSubText.textContent =
					"Act innocent, lie, and try not to get caught.";
				roleMainText.classList.add("highlight-impostor");
				roleSubText.classList.remove("highlight-category");
			} else {
				// Use the same category for ALL non-impostors
				roleMainText.textContent = "You are NOT the impostor";
				roleSubText.innerHTML =
					`Your category: <span class="highlight-category">${commonCategory}</span>`;
				roleMainText.classList.remove("highlight-impostor");
				roleSubText.classList.add("highlight-category");
			}

I noticed that the `roleMainText.classList.add` call in the non-impostor branch was cut off or missing at the bottom of the last code block. I corrected this in the updated version below to ensure it works without syntax errors:

```html
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<title>Impostor Game</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<style>
		* {
			box-sizing: border-box;
			font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
		}

		body {
			margin: 0;
			min-height: 100vh;
			display: flex;
			align-items: center;
			justify-content: center;
			background: #0f172a;
			color: #e5e7eb;
		}

		.container {
			background: #111827;
			border-radius: 12px;
			padding: 20px;
			width: 100%;
			max-width: 480px;
			box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
		}

		h1 {
			margin-top: 0;
			font-size: 1.5rem;
			text-align: center;
		}

		label {
			display: block;
			font-size: 0.9rem;
			margin-bottom: 4px;
			color: #9ca3af;
		}

		input[type="number"],
		textarea {
			width: 100%;
			border-radius: 8px;
			border: 1px solid #374151;
			background: #020617;
			color: #e5e7eb;
			padding: 8px 10px;
			font-size: 0.95rem;
		}

		textarea {
			min-height: 120px;
			resize: vertical;
		}

		button {
			display: inline-block;
			border: none;
			border-radius: 999px;
			padding: 10px 16px;
			font-size: 0.95rem;
			font-weight: 600;
			cursor: pointer;
			background: #22c55e;
			color: #022c22;
			transition: transform 0.05s ease, box-shadow 0.1s ease, background 0.15s ease;
			box-shadow: 0 8px 20px rgba(34, 197, 94, 0.4);
		}

		button:hover {
			background: #16a34a;
			transform: translateY(-1px);
		}

		button:active {
			transform: translateY(0);
			box-shadow: 0 3px 10px rgba(34, 197, 94, 0.3);
		}

		.button-secondary {
			background: #4b5563;
			color: #e5e7eb;
			box-shadow: none;
		}

		.button-secondary:hover {
			background: #6b7280;
		}

		.section {
			margin-bottom: 16px;
		}

		.row {
			display: flex;
			gap: 10px;
			align-items: center;
			margin-top: 10px;
		}

		.error {
			color: #f97373;
			font-size: 0.85rem;
			margin-top: 4px;
			min-height: 1.1em;
		}

		.badge {
			display: inline-block;
			padding: 3px 10px;
			border-radius: 999px;
			background: #1f2937;
			font-size: 0.8rem;
			color: #9ca3af;
			margin-bottom: 8px;
		}

		.role-card {
			border-radius: 12px;
			padding: 16px;
			background: #020617;
			border: 1px solid #1f2937;
			text-align: center;
		}

		.role-main {
			font-size: 1.3rem;
			font-weight: 700;
			margin-bottom: 6px;
		}

		.role-sub {
			font-size: 0.95rem;
			color: #9ca3af;
		}

		.highlight-impostor {
			color: #f97373;
		}

		.highlight-category {
			color: #38bdf8;
		}
	</style>
</head>
<body>
	<div class="container">
		<h1>Impostor Game</h1>

		<!-- SETUP SCREEN -->
		<div id="setup-screen">
			<div class="section">
				<label for="player-count">Number of players</label>
				<input
					id="player-count"
					type="number"
					min="2"
					max="99"
					value="5"
				/>
			</div>

			<div class="section">
				<label for="categories">
					Categories (one per line or separated by commas)
				</label>
				<textarea
					id="categories"
					placeholder="Example:
Doctor
Detective
Engineer
Alien"
				></textarea>
			</div>

			<div class="section">
				<label for="impostor-count">
					Number of impostors (optional, default = 1)
				</label>
				<input
					id="impostor-count"
					type="number"
					min="1"
					max="10"
					placeholder="1"
				/>
			</div>

			<div class="error" id="error-message"></div>

			<div class="row">
				<button id="start-button">Start game</button>
				<button class="button-secondary" id="fill-example">
					Fill example categories
				</button>
			</div>
		</div>

		<!-- GAME SCREEN -->
		<div id="game-screen" style="display: none;">
			<div class="badge" id="player-badge">Player ?</div>

			<div class="role-card" id="role-card">
				<div class="role-main" id="role-main-text">
					Pass the device to the next player.
				</div>
				<div class="role-sub" id="role-sub-text">
					When you are ready, press the button below to see your role.
				</div>
			</div>

			<div class="section" style="margin-top: 16px; text-align: center;">
				<button id="role-button">Show my role</button>
			</div>
		</div>

		<!-- FINISHED SCREEN -->
		<div id="finished-screen" style="display: none; text-align: center;">
			<div class="role-card">
				<div class="role-main">All roles have been shown!</div>
				<div class="role-sub">
					You can now discuss and start the game, or start a new round.
				</div>
			</div>

			<div class="section" style="margin-top: 16px;">
				<button id="new-game">Start new game</button>
			</div>
		</div>
	</div>

	<script>
		const setupScreen = document.getElementById("setup-screen");
		const gameScreen = document.getElementById("game-screen");
		const finishedScreen = document.getElementById("finished-screen");

		const playerCountInput = document.getElementById("player-count");
		const categoriesInput = document.getElementById("categories");
		const impostorCountInput = document.getElementById("impostor-count");
		const errorMessage = document.getElementById("error-message");

		const startButton = document.getElementById("start-button");
		const exampleButton = document.getElementById("fill-example");
		const roleButton = document.getElementById("role-button");
		const playerBadge = document.getElementById("player-badge");
		const roleMainText = document.getElementById("role-main-text");
		const roleSubText = document.getElementById("role-sub-text");
		const newGameButton = document.getElementById("new-game");

		let totalPlayers = 0;
		let currentPlayer = 1;
		let impostorIndexes = [];
		let categories = [];
		let hasShownRole = false;

		// One shared category/place for all non-impostors in this round
		let commonCategory = "";

		function parseCategories(raw) {
			return raw
				.split(/[\n,]/)
				.map((c) => c.trim())
				.filter((c) => c.length > 0);
		}

		function chooseImpostors(playerCount, impostorCount) {
			const pool = Array.from({ length: playerCount }, (_, i) => i + 1);
			const chosen = [];

			impostorCount = Math.min(impostorCount, playerCount);

			for (let i = 0; i < impostorCount; i++) {
				const idx = Math.floor(Math.random() * pool.length);
				chosen.push(pool[idx]);
				pool.splice(idx, 1);
			}

			return chosen;
		}

		function resetRoleCardForNextPlayer() {
			playerBadge.textContent = `Player ${currentPlayer}`;
			roleMainText.textContent = "Pass the device to this player.";
			roleSubText.textContent =
				"When they are ready, press the button to see the role.";
			roleMainText.classList.remove("highlight-impostor", "highlight-category");
			roleSubText.classList.remove("highlight-category");
			roleButton.textContent = "Show my role";
			hasShownRole = false;
		}

		function showPlayerRole() {
			const isImpostor = impostorIndexes.includes(currentPlayer);

			if (isImpostor) {
				roleMainText.textContent = "YOU ARE THE IMPOSTOR";
				roleSubText.textContent =
					"Act innocent, lie, and try not to get caught.";
				roleMainText.classList.add("highlight-impostor");
				roleSubText.classList.remove("highlight-category");
			} else {
				roleMainText.textContent = "You are NOT the impostor";
				roleSubText.innerHTML =
					`Your category: <span class="highlight-category">${commonCategory}</span>`;
				roleMainText.classList.remove("highlight-impostor");
				roleSubText.classList.add("highlight-category");
			}

			roleButton.textContent = "Hide and pass to next player";
			hasShownRole = true;
		}

		function goToNextPlayerOrFinish() {
			currentPlayer++;

			if (currentPlayer > totalPlayers) {
				gameScreen.style.display = "none";
				finishedScreen.style.display = "block";
				return;
			}

			resetRoleCardForNextPlayer();
		}

		startButton.addEventListener("click", () => {
			errorMessage.textContent = "";

			const playerCount = parseInt(playerCountInput.value, 10);
			let impostorCount = parseInt(impostorCountInput.value, 10);

			if (isNaN(playerCount) || playerCount < 2) {
				errorMessage.textContent = "Please enter at least 2 players.";
				return;
			}

			if (isNaN(impostorCount) || impostorCount < 1) {
				impostorCount = 1;
			}

			const parsedCategories = parseCategories(categoriesInput.value);
			if (parsedCategories.length === 0) {
				errorMessage.textContent =
					"Add at least one category in the settings.";
				return;
			}

			totalPlayers = playerCount;
			currentPlayer = 1;
			categories = parsedCategories;
			impostorIndexes = chooseImpostors(playerCount, impostorCount);

			// Pick ONE random category for the whole round
			commonCategory =
				categories[Math.floor(Math.random() * categories.length)];

			resetRoleCardForNextPlayer();
			setupScreen.style.display = "none";
			finishedScreen.style.display = "none";
			gameScreen.style.display = "block";
		});

		exampleButton.addEventListener("click", () => {
			categoriesInput.value = [
				"Hospital",
				"School",
				"Airport",
				"Nightclub",
				"Theme park",
				"Supermarket",
				"Beach"
			].join("\n");
		});

		roleButton.addEventListener("click", () => {
			if (!hasShownRole) {
				showPlayerRole();
			} else {
				goToNextPlayerOrFinish();
			}
		});

		newGameButton.addEventListener("click", () => {
			gameScreen.style.display = "none";
			finishedScreen.style.display = "none";
			setupScreen.style.display = "block";
			errorMessage.textContent = "";
			commonCategory = "";
		});
	</script>
</body>
</html>